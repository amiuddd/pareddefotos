<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Te amo mi niña</title>
  <style>
    * {
      -webkit-tap-highlight-color: transparent;
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: 'Segoe UI', 'Brush Script MT', cursive, sans-serif;
      touch-action: manipulation;
      width: 100vw;
      height: 100vh;
      background: black;
    }
    
    /* Estilos para el login con PIN */
    #pinLogin {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      padding: 20px;
    }
    
    .pin-container {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 25px;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      text-align: center;
    }
    
    .pin-title {
      color: #d23669;
      font-size: 24px;
      margin-bottom: 25px;
      font-weight: bold;
    }
    
    .pin-display {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
      gap: 15px;
    }
    
    .pin-dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid #d23669;
      transition: all 0.2s ease;
    }
    
    .pin-dot.filled {
      background-color: #d23669;
    }
    
    .pin-error {
      color: #ff4757;
      margin-bottom: 15px;
      min-height: 20px;
      font-size: 14px;
    }
    
    .pin-keypad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
    }
    
    .pin-key {
      background: white;
      border: 2px solid #d23669;
      border-radius: 50%;
      height: 70px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: #d23669;
      cursor: pointer;
      user-select: none;
      transition: all 0.2s ease;
      touch-action: manipulation;
    }
    
    .pin-key:active {
      background: #d23669;
      color: white;
      transform: scale(0.95);
    }
    
    .pin-key.empty {
      border: none;
      background: transparent;
      cursor: default;
    }
    
    .pin-key.delete {
      background: #ff6b81;
      color: white;
      border: none;
    }
    
    /* Estilos originales (ocultos inicialmente) */
    #mainContent {
      display: none;
    }
    
    .floating-text, .heart, .photo {
      position: absolute;
      animation: float 30s linear infinite;
      will-change: transform;
    }
    
    .floating-text {
      color: #000000;
      font-size: 5vw;
      font-weight: bold;
      text-shadow: 
        1px 1px 1px rgba(255,255,255,0.8),
        -1px -1px 1px rgba(255,255,255,0.8);
      filter: drop-shadow(0 0 2px rgba(0,0,0,0.3));
      font-style: italic;
      letter-spacing: 1px;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><text x="10" y="50" font-family="Brush Script MT" font-size="30" fill="black">a</text></svg>') 0 0 repeat;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-stroke: 0.5px #000;
      -webkit-text-stroke: 0.5px #000;
    }
    
    .heart {
      width: 8vw;
      height: 8vw;
      min-width: 40px;
      min-height: 40px;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="red" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') no-repeat center center;
      background-size: contain;
      filter: drop-shadow(0 0 2px rgba(0,0,0,0.5));
    }
    
    .photo {
      width: 25vw;
      height: 25vw;
      max-width: 150px;
      max-height: 150px;
      object-fit: cover;
      border-radius: 2vw;
      box-shadow: 0 0 8px rgba(0,0,0,0.5);
      border: 2px solid white;
      filter: brightness(1.05);
    }
    
    @keyframes float {
      0% {
        transform: translate3d(var(--x, 0), var(--y, 0), var(--z, 0)) scale(1);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      100% {
        transform: translate3d(var(--x, 0), calc(var(--y, 0) - 200vh), var(--z, 0)) scale(1.5);
        opacity: 0;
      }
    }
    
    .music-control {
      position: fixed;
      bottom: 5vh;
      right: 5vw;
      background: rgba(0,0,0,0.5);
      padding: 4vw;
      border-radius: 50%;
      cursor: pointer;
      z-index: 1000;
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border: 1px solid rgba(255,255,255,0.5);
    }
    
    .music-control img {
      width: 8vw;
      height: 8vw;
      min-width: 40px;
      min-height: 40px;
      filter: invert(1);
    }
  </style>
</head>
<body>
  <!-- Sistema de login con PIN -->
  <div id="pinLogin">
    <div class="pin-container">
      <div class="pin-title">Ingresa el PIN</div>
      <div class="pin-display">
        <div class="pin-dot"></div>
        <div class="pin-dot"></div>
        <div class="pin-dot"></div>
        <div class="pin-dot"></div>
        <div class="pin-dot"></div>
        <div class="pin-dot"></div>
        <div class="pin-dot"></div>
        <div class="pin-dot"></div>
      </div>
      <div class="pin-error" id="pinError"></div>
      <div class="pin-keypad">
        <div class="pin-key" data-key="1">1</div>
        <div class="pin-key" data-key="2">2</div>
        <div class="pin-key" data-key="3">3</div>
        <div class="pin-key" data-key="4">4</div>
        <div class="pin-key" data-key="5">5</div>
        <div class="pin-key" data-key="6">6</div>
        <div class="pin-key" data-key="7">7</div>
        <div class="pin-key" data-key="8">8</div>
        <div class="pin-key" data-key="9">9</div>
        <div class="pin-key empty"></div>
        <div class="pin-key" data-key="0">0</div>
        <div class="pin-key delete">⌫</div>
      </div>
    </div>
  </div>

  <!-- Contenido principal (oculto inicialmente) -->
  <div id="mainContent">
    <audio id="bgMusic" loop>
      <source src="musica/cancion.mp3" type="audio/mpeg">
      Tu navegador no soporta el elemento de audio.
    </audio>
    
    <div class="music-control" id="musicToggle">
      <img src="https://cdn-icons-png.flaticon.com/512/3669/3669483.png" alt="Music control">
    </div>
  </div>

  <script>
    // Sistema de PIN
    const correctPin = "20022222";
    let enteredPin = "";
    const pinDots = document.querySelectorAll('.pin-dot');
    const pinError = document.getElementById('pinError');
    const pinLogin = document.getElementById('pinLogin');
    const mainContent = document.getElementById('mainContent');
    
    // Configurar teclado de PIN
    document.querySelectorAll('.pin-key:not(.empty)').forEach(key => {
      key.addEventListener('click', function() {
        const keyValue = this.getAttribute('data-key');
        
        if (keyValue && enteredPin.length < 8) {
          enteredPin += keyValue;
          updatePinDots();
          
          if (enteredPin.length === 8) {
            validatePin();
          }
        } else if (this.classList.contains('delete')) {
          enteredPin = enteredPin.slice(0, -1);
          updatePinDots();
          pinError.textContent = "";
        }
      });
    });
    
    function updatePinDots() {
      pinDots.forEach((dot, index) => {
        if (index < enteredPin.length) {
          dot.classList.add('filled');
        } else {
          dot.classList.remove('filled');
        }
      });
    }
    
    function validatePin() {
      if (enteredPin === correctPin) {
        // PIN correcto, mostrar contenido principal
        pinLogin.style.display = 'none';
        mainContent.style.display = 'block';
        document.body.style.background = "black url('fotos/fondo.jpg') no-repeat center center fixed";
        document.body.style.backgroundSize = "cover";
        
        // Iniciar la experiencia después del login
        initExperience();
      } else {
        // PIN incorrecto
        pinError.textContent = "PIN incorrecto. Intenta nuevamente.";
        enteredPin = "";
        updatePinDots();
        
        // Agregar animación de error
        pinDots.forEach(dot => {
          dot.style.animation = 'shake 0.5s';
          setTimeout(() => {
            dot.style.animation = '';
          }, 500);
        });
      }
    }
    
    // Agregar animación de error
    const style = document.createElement('style');
    style.textContent = `
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
      }
    `;
    document.head.appendChild(style);
    
    // Función para iniciar la experiencia después del login
    function initExperience() {
      // Detectar si es móvil
      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      
      const body = document.body;
      const phrases = ["I love you so much baby", "Te amo mi niña", "22-04-2002"];
      const imageUrls = [
        "fotos/foto1.jpg",
        "fotos/foto2.png",
        "fotos/foto3.jpg",
        "fotos/foto4.png",
        "fotos/foto5.jpg",
        "fotos/foto6.png",
        "fotos/foto7.jpg",
        "fotos/foto8.png",
        "fotos/foto9.jpg",
        "fotos/foto10.png"
      ];

      // Control de música
      const music = document.getElementById('bgMusic');
      const musicToggle = document.getElementById('musicToggle');
      let isPlaying = false;
      
      // Función para iniciar la música
      function startMusic() {
        if (isPlaying) return;
        
        music.volume = 0.7;
        
        // En móviles, necesitamos una interacción del usuario primero
        if (isMobile) {
          // Crear un botón overlay grande para iniciar la música
          const overlay = document.createElement('div');
          overlay.style.position = 'fixed';
          overlay.style.top = '0';
          overlay.style.left = '0';
          overlay.style.width = '100%';
          overlay.style.height = '100%';
          overlay.style.backgroundColor = 'rgba(0,0,0,0.5)';
          overlay.style.display = 'flex';
          overlay.style.justifyContent = 'center';
          overlay.style.alignItems = 'center';
          overlay.style.zIndex = '1001';
          overlay.style.color = 'white';
          overlay.style.fontSize = '5vw';
          overlay.style.textAlign = 'center';
          overlay.style.padding = '20px';
          overlay.style.cursor = 'pointer';
          overlay.innerHTML = 'Toca aquí para comenzar la música y la experiencia';
          
          overlay.addEventListener('click', function() {
            music.play()
              .then(() => {
                isPlaying = true;
                musicToggle.innerHTML = '<img src="https://cdn-icons-png.flaticon.com/512/3669/3669483.png" alt="Music control">';
                document.body.removeChild(overlay);
              })
              .catch(error => {
                console.error("Error al reproducir música:", error);
                overlay.innerHTML = 'No se pudo iniciar la música. Toca para continuar sin audio.';
                overlay.style.backgroundColor = 'rgba(255,0,0,0.3)';
                overlay.addEventListener('click', function() {
                  document.body.removeChild(overlay);
                });
              });
          }, { once: true });
          
          document.body.appendChild(overlay);
          return;
        }
        
        // Para desktop
        music.play()
          .then(() => {
            isPlaying = true;
            musicToggle.innerHTML = '<img src="https://cdn-icons-png.flaticon.com/512/3669/3669483.png" alt="Music control">';
          })
          .catch(error => {
            console.error("Error al reproducir música:", error);
          });
      }
      
      // Evento para tocar la pantalla
      const startInteraction = isMobile ? 'touchstart' : 'click';
      document.addEventListener(startInteraction, function() {
        startMusic();
      }, { once: true, passive: true });
      
      // Evento para el botón de música
      musicToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        e.preventDefault();
        
        if (isPlaying) {
          music.pause();
          musicToggle.innerHTML = '<img src="https://cdn-icons-png.flaticon.com/512/7960/7960808.png" alt="Music control">';
        } else {
          music.play()
            .then(() => {
              musicToggle.innerHTML = '<img src="https://cdn-icons-png.flaticon.com/512/3669/3669483.png" alt="Music control">';
            })
            .catch(error => {
              console.error("Error al reanudar música:", error);
            });
        }
        isPlaying = !isPlaying;
      }, { passive: true });

      // Ajustar cantidad de elementos para móviles
      const elementsPerInterval = isMobile ? 1 : 3;
      const intervalTime = isMobile ? 2000 : 1000;

      let currentPhotoIndex = 0;
      
      function getNextPhoto() {
        const photo = imageUrls[currentPhotoIndex];
        currentPhotoIndex = (currentPhotoIndex + 1) % imageUrls.length;
        return photo;
      }

      function createFloatingElement(type, x, y, z) {
        const el = document.createElement('div');
        el.style.setProperty('--x', x + 'vw');
        el.style.setProperty('--y', y + 'vh');
        el.style.setProperty('--z', z + 'px');
        el.style.animationDuration = (Math.random() * 20 + 20) + 's';

        if (type === 'text') {
          el.className = 'floating-text';
          el.textContent = phrases[Math.floor(Math.random() * phrases.length)];
        } else if (type === 'heart') {
          el.className = 'heart';
        } else if (type === 'photo') {
          const img = document.createElement('img');
          img.src = getNextPhoto();
          img.className = 'photo';
          img.loading = 'lazy';
          img.onerror = function() {
            const originalSrc = this.src;
            if (originalSrc.endsWith('.jpg')) {
              this.src = originalSrc.replace('.jpg', '.png');
            } else if (originalSrc.endsWith('.png')) {
              this.src = originalSrc.replace('.png', '.jpg');
            } else {
              this.style.display = 'none';
            }
          };
          el.appendChild(img);
        }
        body.appendChild(el);
      }

      // Crear elementos flotantes
      setInterval(() => {
        for (let i = 0; i < elementsPerInterval; i++) {
          const x = Math.random() * 80 + 10;
          const y = Math.random() * 50 + 50;
          const z = Math.random() * 500 - 250;
          createFloatingElement('photo', x, y, z);
          createFloatingElement('text', x, y, z);
          createFloatingElement('heart', x, y, z);
        }
      }, intervalTime);

      // Prevenir zoom en móviles
      document.addEventListener('gesturestart', function(e) {
        e.preventDefault();
      });

      // Optimización para móviles: limpiar elementos antiguos
      if (isMobile) {
        setInterval(() => {
          const elements = document.querySelectorAll('.floating-text, .heart, .photo');
          if (elements.length > 30) {
            for (let i = 0; i < 10; i++) {
              if (elements[i]) {
                elements[i].remove();
              }
            }
          }
        }, 5000);
      }
    }
  </script>
</body>
</html>